<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfume & Cosmetics Store</title>
    <!-- Add your CSS links here -->
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>
<body>

   

    <!-- Header section -->
    <header>
        <div class="search-container">
            <form id="searchForm" action="#" method="GET"> <!-- Update form action -->
                <input type="text" id="searchInput" placeholder="Search products..." name="search">
                <button type="submit"><i class="fa fa-search"></i></button>
            </form>
        </div>
        
        
        <div class="profile-logo">
            
            <a href="profile.html">
                <i class="fas fa-user-circle"></i>
            </a>
         
        </div>
        <!-- logo -->
        <div class="title">
            <img src="img/Logo.jpg" alt="Ardior Logo">
        </div>
    
        <!-- Search bar -->
     
    
        <div class="navlink">
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shopping.html">Products</a></li>
                    <li><a href="aboutus.html">About Us</a></li>
                    <li><a href="cart.html">cart</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    

    <!-- Main content section -->
    <main>
        <section class="hero">
            <h3>Welcome to our Perfume & Cosmetics Store</h3>
            <div class="hero-image">
                <img src="img/Home.png" alt="Perfume & Cosmetics Store">
            </div>
            <a href="shopping.html" class="btn">Shop Now</a>
        </section>
        <h2>Featured Products</h2>
       
       
        <section class="products">
            <!-- Product 1 -->
            <div class="product" id="product1">
                <h3 id="productName1">Perfume Name1</h3>
                <p id="productPrice1">$4</p>
                <button class="add-to-cart" data-id="1">Add to Cart</button>
            </div>
    
            <!-- Product 2 -->
            <div class="product" id="product2">
                <h3 id="productName2">Perfume Name2</h3>
                <p id="productPrice2">$7</p>
                <button class="add-to-cart" data-id="2">Add to Cart</button>
            </div>
    
            <!-- Product 3 -->
            <div class="product" id="product3">
                <h3 id="productName3">Dior</h3>
                <p id="productPrice3">$6</p>
                <button class="add-to-cart" data-id="3">Add to Cart</button>
            </div>
            <!-- Add more products as needed -->
        </section>
    </main>

    <!-- Footer section -->
    <footer>
        <div class="logo">
            <h1>Perfume & Cosmetics Store</h1>
        </div>
        <nav>
      
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shopping.html">Products</a></li>
                    <li><a href="aboutus.html">About Us</a></li>
                    <li><a href="cart.html">cart</a></li>
                </ul>
            
        </nav>
        <p>&copy; 2024 Perfume & Cosmetics Store. All rights reserved.</p>
    </footer>


    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword,onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA0HQ-OBjuy39U4I5e2sHW_6scyrbvshgA",
            authDomain: "perfume-3c5fa.firebaseapp.com",
            databaseURL: "https://perfume-3c5fa-default-rtdb.firebaseio.com",
            projectId: "perfume-3c5fa",
            storageBucket: "perfume-3c5fa.appspot.com",
            messagingSenderId: "271666106212",
            appId: "1:271666106212:web:78f54192781bdd1b887471"
        };
        const firebaseApp = initializeApp(firebaseConfig);

        const auth = getAuth(firebaseApp);

        // Check if the user has successfully logged in
        if (sessionStorage.getItem('loggedIn') === 'true') {
            // User is logged in, redirect to index.html
            window.location.href = 'index.html';
        }

        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in.
                console.log("User is signed in");
                // Set flag indicating successful login
                sessionStorage.setItem('loggedIn', 'true');
                // Redirect to login page after 20 seconds
                setTimeout(() => {
                    console.log("Redirecting to login page...");
                    window.location.href = 'login.html';
                }, 20000); // 20 seconds in milliseconds
            } else {
                // No user is signed in.
                console.log("No user is signed in");
                // Redirect to login page
                window.location.href = 'login.html';
            }
        });

        // Function to log in to an existing account
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            signInWithEmailAndPassword(auth, email, password)
                .then(() => {
                    document.getElementById('loginMessage').textContent = "Login successful!";
                    clearForm('loginForm');
                    console.log("Redirecting to index.html..."); // Add this line for debugging
                    // Set flag indicating successful login
                    sessionStorage.setItem('loggedIn', 'true');
                    // Redirect to index.html upon successful login
                    window.location.href = 'index.html';
                })
                .catch(error => {
                    document.getElementById('loginMessage').textContent = error.message;
                });
        }

        // Function to clear form fields
        function clearForm(formId) {
            const form = document.getElementById(formId);
            const inputs = form.getElementsByTagName('input');
            for (let i = 0; i < inputs.length; i++) {
                inputs[i].value = '';
            }
        }

        // Adding event listener to login button after the function definition
        document.getElementById('loginButton').addEventListener('click', login);
</script>

    <script>
document.addEventListener('DOMContentLoaded', function() {
        const addToCartButtons = document.querySelectorAll('.add-to-cart');
        addToCartButtons.forEach(button => {
            button.addEventListener('click', function() {
                const name = this.getAttribute('data-name');
                const price = parseFloat(this.getAttribute('data-price'));
                
                // Retrieve existing cart items from localStorage
                let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
                
                // Check if the item is already in the cart
                const existingItemIndex = cartItems.findIndex(item => item.name === name);
                if (existingItemIndex !== -1) {
                    // If the item already exists in the cart, update its quantity
                    cartItems[existingItemIndex].quantity++;
                } else {
                    // If the item is not in the cart, add it as a new item
                    cartItems.push({ name: name, price: price, quantity: 1 });
                }
                
                // Save the updated cart items back to localStorage
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                
                // Redirect the user to the cart page
                window.location.href = 'cart.html';
            });
        });
    });
    </script>
    <script src="login.js" type="module"></script>
</body>
</html> 



